<form
  id="betaForm"
  action="https://formspree.io/f/xjkowgbl"
  method="POST"
>
  <!-- NAME -->
  <div class="form-group">
    <label for="name">Full Name</label>
    <div class="input-with-icon">
      <i class="fas fa-user"></i>
      <input
        type="text"
        id="name"
        name="name"
        placeholder="Enter your full name"
        required
      />
    </div>
  </div>

  <!-- EMAIL -->
  <div class="form-group">
    <label for="email">Email</label>
    <div class="input-with-icon">
      <i class="fas fa-envelope"></i>
      <input
        type="email"
        id="email"
        name="email"
        placeholder="Enter your email"
        required
      />
    </div>
  </div>

  <!-- RUNS PER WEEK -->
  <div class="form-group">
    <label for="runsPerWeek">Runs per Week</label>
    <div class="input-with-icon">
      <i class="fas fa-running"></i>
      <input
        type="number"
        id="runsPerWeek"
        name="runs_per_week"
        placeholder="e.g. 3"
        min="0"
        required
      />
    </div>
  </div>

  <button type="submit" class="btn-submit">
    <i class="fas fa-flag-checkered"></i> Join the Race
  </button>
</form>

<script>
  document
    .getElementById('betaForm')
    .addEventListener('submit', async function (e) {
      e.preventDefault();
      const form = e.target;
      const formData = new FormData(form);

      const res = await fetch(form.action, {
        method: form.method,
        body: formData,
        headers: { 'Accept': 'application/json' }
      });

      if (res.ok) {
        const name = formData.get('name');
        const email = formData.get('email');
        const runs = formData.get('runs_per_week');
        document.querySelector('.form-container').innerHTML = `
          <div class="success-message">
            <div class="logo">
              <div class="logo-circle">
                <i class="fas fa-running runner-icon"></i>
              </div>
            </div>
            <h2>You're In!</h2>
            <p>Thanks, <strong>${name}</strong>!</p>
            <p>We’ve recorded that you run <strong>${runs}</strong> times/week.</p>
            <p>A confirmation has been sent to <strong>${email}</strong>.</p>
          </div>
        `;
      } else {
        alert('Oops—something went wrong. Please try again.');
      }
    });
</script>
